import{g as r}from"../@antv/@antv.821fe49b.js";import{b as e}from"../@babel/@babel.2f68c20c.js";import{r as n}from"../remove-accents/remove-accents.062e2d39.js";var t={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};o.rankings=t;var a=function(r,e){return String(r.rankedValue).localeCompare(String(e.rankedValue))};function o(r,n,o){void 0===o&&(o={});var i=o,s=i.keys,c=i.threshold,d=void 0===c?t.MATCHES:c,h=i.baseSort,k=void 0===h?a:h,v=i.sorter,T=void 0===v?function(r){return r.sort((function(r,e){return function(r,e,n){var t=-1,a=1,o=r.rank,u=r.keyIndex,i=e.rank,l=e.keyIndex;return o===i?u===l?n(r,e):u<l?t:a:o>i?t:a}(r,e,k)}))}:v,A=r.reduce((function(r,a,i){var c=function(r,e,n,a){if(!e){return{rankedValue:r,rank:u(r,n,a),keyIndex:-1,keyThreshold:a.threshold}}return function(r,e){for(var n=[],t=0,a=e.length;t<a;t++)for(var o=e[t],u=f(o),i=l(r,o),s=0,c=i.length;s<c;s++)n.push({itemValue:i[s],attributes:u});return n}(r,e).reduce((function(r,e,o){var i=r.rank,l=r.rankedValue,s=r.keyIndex,f=r.keyThreshold,c=e.itemValue,d=e.attributes,h=u(c,n,a),k=l,v=d.minRanking,T=d.maxRanking,A=d.threshold;return h<v&&h>=t.MATCHES?h=v:h>T&&(h=T),h>i&&(i=h,s=o,f=A,k=c),{rankedValue:k,rank:i,keyIndex:s,keyThreshold:f}}),{rankedValue:r,rank:t.NO_MATCH,keyIndex:-1,keyThreshold:a.threshold})}(a,s,n,o),h=c.rank,k=c.keyThreshold;h>=(void 0===k?d:k)&&r.push(e({},c,{item:a,index:i}));return r}),[]);return T(A).map((function(r){return r.item}))}function u(r,e,n){return r=i(r,n),(e=i(e,n)).length>r.length?t.NO_MATCH:r===e?t.CASE_SENSITIVE_EQUAL:(r=r.toLowerCase())===(e=e.toLowerCase())?t.EQUAL:r.startsWith(e)?t.STARTS_WITH:r.includes(" "+e)?t.WORD_STARTS_WITH:r.includes(e)?t.CONTAINS:1===e.length?t.NO_MATCH:(a=r,o="",a.split(" ").forEach((function(r){r.split("-").forEach((function(r){o+=r.substr(0,1)}))})),o).includes(e)?t.ACRONYM:function(r,e){var n=0,a=0;function o(r,e,t){for(var a=t,o=e.length;a<o;a++){if(e[a]===r)return n+=1,a+1}return-1}function u(r){var a=1/r,o=n/e.length;return t.MATCHES+o*a}var i=o(e[0],r,0);if(i<0)return t.NO_MATCH;a=i;for(var l=1,s=e.length;l<s;l++){if(!((a=o(e[l],r,a))>-1))return t.NO_MATCH}return u(a-i)}(r,e);var a,o}function i(r,e){return r=""+r,e.keepDiacritics||(r=n(r)),r}function l(r,e){var n;if("object"==typeof e&&(e=e.key),"function"==typeof e)n=e(r);else if(null==r)n=null;else if(Object.hasOwnProperty.call(r,e))n=r[e];else{if(e.includes("."))return function(r,e){for(var n=r.split("."),t=[e],a=0,o=n.length;a<o;a++){for(var u=n[a],i=[],l=0,s=t.length;l<s;l++){var f=t[l];if(null!=f)if(Object.hasOwnProperty.call(f,u)){var c=f[u];null!=c&&i.push(c)}else"*"===u&&(i=i.concat(f))}t=i}if(Array.isArray(t[0])){var d=[];return d.concat.apply(d,t)}return t}(e,r);n=null}return null==n?[]:Array.isArray(n)?n:[String(n)]}var s={maxRanking:1/0,minRanking:-1/0};function f(r){return"string"==typeof r?s:e({},s,r)}var c=r(Object.freeze(Object.defineProperty({__proto__:null,defaultBaseSortFn:a,matchSorter:o,rankings:t},Symbol.toStringTag,{value:"Module"})));export{c as r};
