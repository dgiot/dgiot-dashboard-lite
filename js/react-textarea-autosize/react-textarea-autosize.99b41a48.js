import{g as e}from"../@antv/@antv.821fe49b.js";import{d as t,b as r}from"../@babel/@babel.2f68c20c.js";import{r as o}from"../react/react.892b78e7.js";import{u as n}from"../use-latest/use-latest.64f23983.js";import{u as i}from"../use-composed-ref/use-composed-ref.27c3b8b5.js";var a={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},d=function(e){Object.keys(a).forEach((function(t){e.style.setProperty(t,a[t],"important")}))},s=null;var u=function(){},l=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],p=!!document.documentElement.currentStyle,c=function(e,a){var c,f=e.cacheMeasurements,h=e.maxRows,g=e.minRows,b=e.onChange,m=void 0===b?u:b,v=e.onHeightChange,x=void 0===v?u:v,S=t(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),y=void 0!==S.value,z=o.exports.useRef(null),w=i(z,a),R=o.exports.useRef(0),F=o.exports.useRef(),j=function(){var e=z.current,t=f&&F.current?F.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r,o=(r=t,l.reduce((function(e,t){return e[t]=r[t],e}),{})),n=o.boxSizing;return""===n?null:(p&&"border-box"===n&&(o.width=parseFloat(o.width)+parseFloat(o.borderRightWidth)+parseFloat(o.borderLeftWidth)+parseFloat(o.paddingRight)+parseFloat(o.paddingLeft)+"px"),{sizingStyle:o,paddingSize:parseFloat(o.paddingBottom)+parseFloat(o.paddingTop),borderSize:parseFloat(o.borderBottomWidth)+parseFloat(o.borderTopWidth)})}(e);if(t){F.current=t;var r=function(e,t,r,o){void 0===r&&(r=1),void 0===o&&(o=1/0),s||((s=document.createElement("textarea")).setAttribute("tabindex","-1"),s.setAttribute("aria-hidden","true"),d(s)),null===s.parentNode&&document.body.appendChild(s);var n=e.paddingSize,i=e.borderSize,a=e.sizingStyle,u=a.boxSizing;Object.keys(a).forEach((function(e){var t=e;s.style[t]=a[t]})),d(s),s.value=t;var l=function(e,t){var r=s.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize}(0,e);s.value="x";var p=s.scrollHeight-n,c=p*r;"border-box"===u&&(c=c+n+i),l=Math.max(c,l);var f=p*o;return"border-box"===u&&(f=f+n+i),[l=Math.min(f,l),p]}(t,e.value||e.placeholder||"x",g,h),o=r[0],n=r[1];R.current!==o&&(R.current=o,e.style.setProperty("height",o+"px","important"),x(o,{rowHeight:n}))}};return o.exports.useLayoutEffect(j),c=n(j),o.exports.useLayoutEffect((function(){var e=function(e){c.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),o.exports.createElement("textarea",r({},S,{onChange:function(e){y||j(),m(e)},ref:w}))},f=o.exports.forwardRef(c),h=e(Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"})));export{h as r};
