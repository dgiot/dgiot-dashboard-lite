import{g as n}from"../@antv/@antv.821fe49b.js";function r(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var t=[],e=!0,u=!1,o=void 0;try{for(var a,i=n[Symbol.iterator]();!(e=(a=i.next()).done)&&(t.push(a.value),!r||t.length!==r);e=!0);}catch(f){u=!0,o=f}finally{try{e||null==i.return||i.return()}finally{if(u)throw o}}return t}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function t(n,r,t,e){n=n.filter((function(n,e){var u=r(n,e),o=t(n,e);return null!=u&&isFinite(u)&&null!=o&&isFinite(o)})),e&&n.sort((function(n,t){return r(n)-r(t)}));for(var u,o,a,i=n.length,f=new Float64Array(i),c=new Float64Array(i),l=0,h=0,v=0;v<i;)a=n[v],f[v]=u=+r(a,v,n),c[v]=o=+t(a,v,n),l+=(u-l)/++v,h+=(o-h)/v;for(var s=0;s<i;++s)f[s]-=l,c[s]-=h;return[f,c,l,h]}function e(n,r,t,e){for(var u=0,o=0,a=n.length;o<a;o++){var i=n[o],f=+r(i,o,n),c=+t(i,o,n);null!=f&&isFinite(f)&&null!=c&&isFinite(c)&&e(f,c,u++)}}function u(n,r,t,u,o){var a=0,i=0;return e(n,r,t,(function(n,r){var t=r-o(n),e=r-u;a+=t*t,i+=e*e})),1-a/i}function o(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function a(n,r,t){for(var e=Math.log(r-n)*Math.LOG10E+1|0,u=1*Math.pow(10,-e/2-1),a=[f(n),f(r)],i=0;c(a)&&i<1e4;);return a;function f(n){return[n,t(n)]}function c(n){i++;for(var r,t=n.length,e=!1,a=0;a<t-1;a++){var c=n[a],l=n[a+1],h=[((r=[c,l])[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2],v=f(h[0]),s=o([c,h]),g=o([c,v]);Math.abs(s-g)>u&&(n.splice(a+1,0,v),e=!0)}return e}}function i(n,r,t,e){var u=e-n*n,o=Math.abs(u)<1e-24?0:(t-n*r)/u;return[r-o*n,o]}function f(){var n,t=function(n){return n[0]},o=function(n){return n[1]};function f(f){var c=0,l=0,h=0,v=0,s=0,g=0,d=n?+n[0]:1/0,M=n?+n[1]:-1/0;e(f,t,o,(function(r,t){var e=Math.log(t),u=r*t;++c,l+=(t-l)/c,v+=(u-v)/c,g+=(r*u-g)/c,h+=(t*e-h)/c,s+=(u*e-s)/c,n||(r<d&&(d=r),r>M&&(M=r))}));var p=r(i(v/l,h/l,s/l,g/l),2),b=p[0],y=p[1];b=Math.exp(b);var w=function(n){return b*Math.exp(y*n)},x=a(d,M,w);return x.a=b,x.b=y,x.predict=w,x.rSquared=u(f,t,o,l,w),x}return f.domain=function(r){return arguments.length?(n=r,f):n},f.x=function(n){return arguments.length?(t=n,f):t},f.y=function(n){return arguments.length?(o=n,f):o},f}function c(){var n,t=function(n){return n[0]},o=function(n){return n[1]};function a(a){var f=0,c=0,l=0,h=0,v=0,s=n?+n[0]:1/0,g=n?+n[1]:-1/0;e(a,t,o,(function(r,t){++f,c+=(r-c)/f,l+=(t-l)/f,h+=(r*t-h)/f,v+=(r*r-v)/f,n||(r<s&&(s=r),r>g&&(g=r))}));var d=r(i(c,l,h,v),2),M=d[0],p=d[1],b=function(n){return p*n+M},y=[[s,b(s)],[g,b(g)]];return y.a=p,y.b=M,y.predict=b,y.rSquared=u(a,t,o,l,b),y}return a.domain=function(r){return arguments.length?(n=r,a):n},a.x=function(n){return arguments.length?(t=n,a):t},a.y=function(n){return arguments.length?(o=n,a):o},a}function l(n){n.sort((function(n,r){return n-r}));var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function h(){var n=function(n){return n[0]},e=function(n){return n[1]},u=.3;function o(o){for(var a=r(t(o,n,e,!0),4),f=a[0],c=a[1],h=a[2],g=a[3],d=f.length,M=Math.max(2,~~(u*d)),p=new Float64Array(d),b=new Float64Array(d),y=new Float64Array(d).fill(1),w=-1;++w<=2;){for(var x=[0,M-1],m=0;m<d;++m){for(var F=f[m],A=x[0],S=x[1],q=F-f[A]>f[S]-F?A:S,E=0,L=0,P=0,_=0,j=0,O=1/Math.abs(f[q]-F||1),k=A;k<=S;++k){var I=f[k],T=c[k],z=v(Math.abs(F-I)*O)*y[k],G=I*z;E+=z,L+=G,P+=T*z,_+=T*G,j+=I*G}var Q=r(i(L/E,P/E,_/E,j/E),2),B=Q[0],C=Q[1];p[m]=B+C*F,b[m]=Math.abs(c[m]-p[m]),s(f,m+1,x)}if(2===w)break;var D=l(b);if(Math.abs(D)<1e-12)break;for(var H,J,K=0;K<d;++K)H=b[K]/(6*D),y[K]=H>=1?1e-12:(J=1-H*H)*J}return function(n,r,t,e){for(var u,o=n.length,a=[],i=0,f=0,c=[];i<o;++i)u=n[i]+t,c[0]===u?c[1]+=(r[i]-c[1])/++f:(f=0,c[1]+=e,c=[u,r[i]],a.push(c));return c[1]+=e,a}(f,p,h,g)}return o.bandwidth=function(n){return arguments.length?(u=n,o):u},o.x=function(r){return arguments.length?(n=r,o):n},o.y=function(n){return arguments.length?(e=n,o):e},o}function v(n){return(n=1-n*n*n)*n*n}function s(n,r,t){var e=n[r],u=t[0],o=t[1]+1;if(!(o>=n.length))for(;r>u&&n[o]-e<=e-n[u];)t[0]=++u,t[1]=o,++o}function g(){var n,t=function(n){return n[0]},o=function(n){return n[1]},f=Math.E;function c(c){var l=0,h=0,v=0,s=0,g=0,d=n?+n[0]:1/0,M=n?+n[1]:-1/0,p=Math.log(f);e(c,t,o,(function(r,t){var e=Math.log(r)/p;++l,h+=(e-h)/l,v+=(t-v)/l,s+=(e*t-s)/l,g+=(e*e-g)/l,n||(r<d&&(d=r),r>M&&(M=r))}));var b=r(i(h,v,s,g),2),y=b[0],w=b[1],x=function(n){return w*Math.log(n)/p+y},m=a(d,M,x);return m.a=w,m.b=y,m.predict=x,m.rSquared=u(c,t,o,v,x),m}return c.domain=function(r){return arguments.length?(n=r,c):n},c.x=function(n){return arguments.length?(t=n,c):t},c.y=function(n){return arguments.length?(o=n,c):o},c.base=function(n){return arguments.length?(f=n,c):f},c}function d(){var n,o=function(n){return n[0]},i=function(n){return n[1]};function f(f){var c,l,h,v,s=r(t(f,o,i),4),g=s[0],d=s[1],M=s[2],p=s[3],b=g.length,y=0,w=0,x=0,m=0,F=0;for(c=0;c<b;)l=g[c],h=d[c++],y+=((v=l*l)-y)/c,w+=(v*l-w)/c,x+=(v*v-x)/c,m+=(l*h-m)/c,F+=(v*h-F)/c;var A=0,S=0,q=n?+n[0]:1/0,E=n?+n[1]:-1/0;e(f,o,i,(function(r,t){S++,A+=(t-A)/S,n||(r<q&&(q=r),r>E&&(E=r))}));var L=x-y*y,P=y*L-w*w,_=(F*y-m*w)/P,j=(m*L-F*w)/P,O=-_*y,k=function(n){return _*(n-=M)*n+j*n+O+p},I=a(q,E,k);return I.a=_,I.b=j-2*_*M,I.c=O-j*M+_*M*M+p,I.predict=k,I.rSquared=u(f,o,i,A,k),I}return f.domain=function(r){return arguments.length?(n=r,f):n},f.x=function(n){return arguments.length?(o=n,f):o},f.y=function(n){return arguments.length?(i=n,f):i},f}function M(){var n,o=function(n){return n[0]},i=function(n){return n[1]},f=3;function l(l){if(1===f){var h=c().x(o).y(i).domain(n)(l);return h.coefficients=[h.b,h.a],delete h.a,delete h.b,h}if(2===f){var v=d().x(o).y(i).domain(n)(l);return v.coefficients=[v.c,v.b,v.a],delete v.a,delete v.b,delete v.c,v}var s,g,M,p,b,y=r(t(l,o,i),4),w=y[0],x=y[1],m=y[2],F=y[3],A=w.length,S=[],q=[],E=f+1,L=0,P=0,_=n?+n[0]:1/0,j=n?+n[1]:-1/0;for(e(l,o,i,(function(r,t){++P,L+=(t-L)/P,n||(r<_&&(_=r),r>j&&(j=r))})),s=0;s<E;++s){for(M=0,p=0;M<A;++M)p+=Math.pow(w[M],s)*x[M];for(S.push(p),b=new Float64Array(E),g=0;g<E;++g){for(M=0,p=0;M<A;++M)p+=Math.pow(w[M],s+g);b[g]=p}q.push(b)}q.push(S);var O=function(n){var r,t,e,u,o,a=n.length-1,i=[];for(r=0;r<a;++r){for(u=r,t=r+1;t<a;++t)Math.abs(n[r][t])>Math.abs(n[r][u])&&(u=t);for(e=r;e<a+1;++e)o=n[e][r],n[e][r]=n[e][u],n[e][u]=o;for(t=r+1;t<a;++t)for(e=a;e>=r;e--)n[e][t]-=n[e][r]*n[r][t]/n[r][r]}for(t=a-1;t>=0;--t){for(o=0,e=t+1;e<a;++e)o+=n[e][t]*i[e];i[t]=(n[a][t]-o)/n[t][t]}return i}(q),k=function(n){n-=m;var r=F+O[0]+O[1]*n+O[2]*n*n;for(s=3;s<E;++s)r+=O[s]*Math.pow(n,s);return r},I=a(_,j,k);return I.coefficients=function(n,r,t,e){var u,o,a,i,f=Array(n);for(u=0;u<n;++u)f[u]=0;for(u=n-1;u>=0;--u)for(a=r[u],i=1,f[u]+=a,o=1;o<=u;++o)i*=(u+1-o)/o,f[u-o]+=a*Math.pow(t,o)*i;return f[0]+=e,f}(E,O,-m,F),I.predict=k,I.rSquared=u(l,o,i,L,k),I}return l.domain=function(r){return arguments.length?(n=r,l):n},l.x=function(n){return arguments.length?(o=n,l):o},l.y=function(n){return arguments.length?(i=n,l):i},l.order=function(n){return arguments.length?(f=n,l):f},l}function p(){var n,t=function(n){return n[0]},o=function(n){return n[1]};function f(f){var c=0,l=0,h=0,v=0,s=0,g=0,d=n?+n[0]:1/0,M=n?+n[1]:-1/0;e(f,t,o,(function(r,t){var e=Math.log(r),u=Math.log(t);++c,l+=(e-l)/c,h+=(u-h)/c,v+=(e*u-v)/c,s+=(e*e-s)/c,g+=(t-g)/c,n||(r<d&&(d=r),r>M&&(M=r))}));var p=r(i(l,h,v,s),2),b=p[0],y=p[1];b=Math.exp(b);var w=function(n){return b*Math.pow(n,y)},x=a(d,M,w);return x.a=b,x.b=y,x.predict=w,x.rSquared=u(f,t,o,g,w),x}return f.domain=function(r){return arguments.length?(n=r,f):n},f.x=function(n){return arguments.length?(t=n,f):t},f.y=function(n){return arguments.length?(o=n,f):o},f}var b=n(Object.freeze(Object.defineProperty({__proto__:null,regressionExp:f,regressionLinear:c,regressionLoess:h,regressionLog:g,regressionPoly:M,regressionPow:p,regressionQuad:d},Symbol.toStringTag,{value:"Module"})));export{h as a,g as b,p as c,f as e,c as l,M as p,d as q,b as r};
